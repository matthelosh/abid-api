import{J as _,k as p,y as G,K as J,l,o as N,f as O,a as o,w as a,d as c,t as S,b as L,s as $,u as F}from"./app-BkAd76lU.js";import{t as Q,r as R,y as T,M as h,C as z,l as K,p as W,f as q,v as A,g as H,D as I,E as X,d as Y,h as Z,Q as ee}from"./style-CZeYKPpY.js";const le={__name:"WriteMateri",props:{selectedMateri:Object,open:Boolean,selectedBab:Object},emits:["close"],setup(f,{emit:g}){const i=f,b=g,x=[Q.configure({placeholder:{placeholder:"Enter some text..."}}),R,T,h,z,K,W,q,A,H.configure({divider:!0,upload:(n,e)=>{let d=new FormData;return d.append("file",n),_.post(route("dashboard.materi.image.upload"),d).then(s=>(console.log(s.data),Promise.resolve(s.data))).catch(s=>(console.log(s),Promise.reject(s)))}}),I,X,Y,Z];p(!1);const t=p({content:""}),u=p(!1),C=n=>{const e=n.target.files[0];t.value.cover=URL.createObjectURL(e),t.value.fileCover=e},V=async()=>{let n=new FormData;t.value.id&&n.append("id",t.value.id),n.append("title",t.value.title),n.append("slug",t.value.slug??t.value.title.replace(" ","-").toLowerCase()),t.value.fileCover&&n.append("cover",t.value.fileCover),n.append("content",t.value.content),n.append("bab_id",i.selectedBab.id),await _.post(route("dashboard.materi.store"),n).then(e=>{console.log(e)}).catch(e=>{console.log(e)})};return G(()=>{t.value=i.selectedMateri??{content:""}}),J(()=>{u.value=i.open}),(n,e)=>{const d=l("v-toolbar-title"),s=l("v-spacer"),v=l("v-btn"),m=l("v-icon"),k=l("v-toolbar"),w=l("v-card-title"),y=l("v-text-field"),B=l("v-img"),M=l("v-expansion-panel-text"),j=l("v-expansion-panel"),P=l("v-expansion-panels"),D=l("v-card-text"),E=l("v-card"),U=l("v-dialog");return N(),O("div",null,[o(U,{fullscreen:"",modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=r=>u.value=r),scrollable:""},{default:a(()=>[o(E,null,{default:a(()=>[o(w,{class:"pa-0"},{default:a(()=>[o(k,{color:"primary"},{default:a(()=>[o(d,null,{default:a(()=>[c("Tulis Materi "+S(i.selectedBab.label),1)]),_:1}),o(s),o(v,{color:"white",variant:"outlined",size:"small",class:"mr-2",onClick:V},{default:a(()=>e[5]||(e[5]=[c("Simpan")])),_:1}),o(v,{icon:"",color:"red-lighten-2",onClick:e[0]||(e[0]=r=>b("close"))},{default:a(()=>[o(m,null,{default:a(()=>e[6]||(e[6]=[c("mdi-close-circle")])),_:1})]),_:1})]),_:1})]),_:1}),o(D,null,{default:a(()=>[o(y,{label:"Judul",modelValue:t.value.title,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.title=r)},null,8,["modelValue"]),o(P,{class:"mb-4"},{default:a(()=>[o(j,{title:"Gambar Sampul"},{default:a(()=>[o(M,null,{default:a(()=>[L("input",{type:"file",ref:"inputCover",class:"hidden",onChange:C,accept:".jpg, .JPG, .jpeg, .JPEG, .png, .PNG, .webp, .svg"},null,544),o(B,{onClick:e[2]||(e[2]=r=>n.$refs.inputCover.click()),src:t.value.cover},$({_:2},[t.value.cover?void 0:{name:"default",fn:a(()=>[o(m,null,{default:a(()=>e[7]||(e[7]=[c("mdi-image")])),_:1})]),key:"0"}]),1032,["src"])]),_:1})]),_:1})]),_:1}),o(F(ee),{modelValue:t.value.content,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.content=r),extensions:x},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{le as default};
